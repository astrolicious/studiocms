---
import { Icon } from 'astro-icon/components';
import { DISCORD_URL, DOCS_URL, GITHUB_URL } from '../constants';
import ThemeSelect from './ThemeSelect.astro';
---

<nav
  class='flex w-full items-center justify-between py-8 bg-slate-100 px-8 text-gray-900 dark:bg-[--purple-900] dark:text-slate-100'
>
  <div class="studiocms-container mx-auto flex flex-center justify-between">
    <a href="/" class='flex w-fit items-center justify-center gap-x-4'>
      <Icon name='logo' class='h-8 w-8 stroke-slate-100 text-[--purple-900] dark:text-white' />
      <span class="hidden md:block font-bold text-2xl">StudioCMS</span>
    </a>
    <div>
      <ul class='flex items-center gap-x-4'>
        <li class="text-link">
          <a 
            href="/blog"
            class='font-medium text-lg hover:underline' 
            aria-label='Blog link'
            title="Blog"
          >
            Blog
          </a>
        </li>
        <li class="text-link">
          <a 
            href={DOCS_URL} 
            class='font-medium text-lg hover:underline' 
            rel='external nofollow' 
            aria-label='Docs link'
            title="Docs"
          >
            Docs
          </a>
        </li>
        <li class="text-link">
          <a 
            href='/roadmap' 
            class='font-medium text-lg hover:underline mr-8' 
            rel='external nofollow' 
            aria-label='Roadmap link'
            title="Roadmap"
          >
            Roadmap
          </a>
        </li>
        <li>
          <a
            href={DISCORD_URL}
            class="navbar-icon"
            rel='external nofollow'
            aria-label='Discord link'
            title="Discord"
          >
            <Icon
              name='discord'
              class='h-8 w-8 transition duration-200 ease-in-out hover:scale-110'
            />
          </a>
        </li>
        <li>
          <a
            class="navbar-icon"
            href={GITHUB_URL}
            rel='external nofollow'
            aria-label='GitHub link'
            title="GitHub"
            >
            <Icon
              name='github'
              class='h-8 w-8 transition duration-200 ease-in-out hover:scale-110'
            />
          </a>
        </li>
        <li>
          <ThemeSelect />
        </li>
        <li class="relative">
          <div id="mobile-dropdown-icon-container">
            <Icon
              name='heroicons:bars-3'
              class='h-8 w-8 transition duration-200 ease-in-out cursor-pointer'
            />
          </div>
          <div id="mobile-dropdown-container">
            <a 
              href="/blog"
              class='font-medium text-lg hover:underline' 
              aria-label='Blog link'
              title="Blog"
            >
              Blog
            </a>
            <a 
              href={DOCS_URL} 
              class='font-medium text-lg hover:underline' 
              rel='external nofollow' 
              aria-label='Docs link'
              title="Docs"
            >
              Docs
            </a>
            <a 
              href='/roadmap' 
              class='font-medium text-lg hover:underline mr-8' 
              rel='external nofollow' 
              aria-label='Roadmap link'
              title="Roadmap"
            >
              Roadmap
            </a>
            <div class="dropdown-icons">
              <a
                href={DISCORD_URL}
                class="dropdown-icon"
                rel='external nofollow'
                aria-label='Discord link'
                title="Discord"
              >
                <Icon
                  name='discord'
                  class='h-8 w-8 transition duration-200 ease-in-out hover:scale-110'
                />
              </a>
              <a
                class="dropdown-icon"
                href={GITHUB_URL}
                rel='external nofollow'
                aria-label='GitHub link'
                title="GitHub"
                >
                <Icon
                  name='github'
                  class='h-8 w-8 transition duration-200 ease-in-out hover:scale-110'
                />
              </a>
            </div>
          </div>
        </li>
      </ul>
    </div>
  </div>
</nav>
<script>
  const toggle = document.getElementById('mobile-dropdown-icon-container') as HTMLDivElement;
  const dropdown = document.getElementById('mobile-dropdown-container') as HTMLDivElement;

  toggle.addEventListener('click', (e) => {
    e.stopPropagation();
    dropdown.classList.toggle('active');
  });

  document.body.addEventListener('click', (event) => {
    if (!event.target) return;

    if (!dropdown.contains(event.target as Node) && event.target !== toggle) {
      dropdown.classList.remove('active');
    }
  });
</script>