---
import './Dropdown.css';

import type { UIIcons } from '../../utils/Icon.astro';
import Icon from '../../utils/Icon.astro';
import type { StudioCMSColorway } from '../../utils/colors';

type Option = {
	label: string;
	value: string;
	disabled?: boolean;
	icon?: UIIcons;
	iconPosition?: 'start' | 'end';
	color?: StudioCMSColorway;
};

type Props = {
	options: Option[];
	disabled?: boolean;
	id: string;
	align?: 'start' | 'center' | 'end';
	triggerOn?: 'left' | 'right' | 'both';
};

const { options, disabled = false, align = 'center', id, triggerOn = 'left' } = Astro.props;
---
<div 
  class="dropdown-container"
  class:list={[disabled && 'disabled']}
  data-align={align}
  id={`${id}-container`}
  data-trigger={triggerOn}
>
  <div class="dropdown-toggle" id={`${id}-toggle-btn`}>
    <slot />
  </div>
  <ul class="dropdown" class:list={[align]} role="listbox" id={`${id}-dropdown`}>
    {options.map((x) => (
      <li
        class="dropdown-option"
        role="option"
        data-value={x.value}
        class:list={[x.disabled && "disabled", x.color, x.iconPosition]}
      >
        {x.icon && (!x.iconPosition || x.iconPosition === 'start') && ( <Icon class="icon" name={x.icon} width={20} height={20} /> )}
        <span>{x.label}</span>
        {x.icon && x.iconPosition === 'end' && ( <Icon class="icon" name={x.icon} width={20} height={20} /> )}
      </li>
    ))}
  </ul>
</div>