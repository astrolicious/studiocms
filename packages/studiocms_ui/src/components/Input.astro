---
import { generateID } from '../utils/generateID';

type Props = {
	label?: string;
	type?: 'text' | 'password';
	placeholder?: string;
	isRequired?: boolean;
	name?: string;
	disabled?: boolean;
	defaultValue?: string;
	class?: string;
};

const {
	label,
	placeholder,
	name = generateID('input'),
	type = 'text',
	defaultValue,
	isRequired = false,
	disabled = false,
	class: className,
} = Astro.props;
---

<label for={name} class="input-label" class:list={[disabled && "disabled", className]}>
  <span class="label">
    {label} <span class="req-star">{isRequired && "*"}</span>
  </span>
  <input
    placeholder={placeholder}
    name={name}
    id={name}
    type={type}
    class="input"
    required={isRequired}
    disabled={disabled}
    value={defaultValue}
  />
</label>
<style>
  .input-label {
    width: 100%;
    display: flex;
    flex-direction: column;
    gap: .25rem;
    margin-top: .5rem;
  }

  .input-label.disabled {
    opacity: .5;
    pointer-events: none;
  }

  .label {
    font-size: 14px;
  }

  .input {
    padding: .65rem 1rem;
    border-radius: 8px;
    border: 1px solid hsl(var(--border));
    background: hsl(var(--background-step-2));
    color: hsl(var(--text-normal));
    transition: all .15s ease;
  }

  .input:hover {
    background: hsl(var(--background-step-3));
  }

  .input:active, .input:focus {
    border: 1px solid hsl(var(--primary-base));
    outline: none;
    background: hsl(var(--background-step-2));
  }

  .disabled .input:active {
    border: 1px solid hsl(var(--border));
  }

  .req-star {
    color: hsl(var(--danger-base));
    font-weight: 700;
  }
</style>