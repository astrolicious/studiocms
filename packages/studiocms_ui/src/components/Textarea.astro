---
import { generateID } from '../utils/generateID';

type Props = {
	label?: string;
	placeholder?: string;
	isRequired?: boolean;
	fullWidth?: boolean;
	resize?: boolean;
	name?: string;
	disabled?: boolean;
	defaultValue?: string;
};

const {
	label,
	placeholder,
	isRequired,
	fullWidth,
	resize,
	name = generateID('textarea'),
	disabled,
	defaultValue,
} = Astro.props;
---
<label 
  for={name} 
  class="textarea-label"
  class:list={[
    fullWidth && "full",
    resize && "resize",
    disabled && "disabled",
  ]}
>
  <span class="label">
    {label} <span class="req-star">{isRequired && "*"}</span>
  </span>
  <textarea
    placeholder={placeholder}
    name={name}
    id={name}
    class="textarea"
    required={isRequired}
    disabled={disabled}
    
  >{defaultValue}</textarea>
</label>
<style is:global>
  .textarea-label {
    display: flex;
    flex-direction: column;
    gap: .25rem;
    margin-top: .5rem;
    max-width: 80ch;
  }

  .textarea-label.disabled {
    opacity: .5;
    pointer-events: none;
  }

  .textarea-label.full {
    width: 100%;
    max-width: none;
  }

  .label {
    font-size: 14px;
  }

  .textarea {
    padding: .65rem 1rem;
    border-radius: 8px;
    border: 1px solid hsl(var(--border));
    background: hsl(var(--background-step-2));
    color: hsl(var(--text-normal));
    transition: all .15s ease;
    resize: none;
    min-height: 12ch;
  }

  .textarea:hover {
    background: hsl(var(--background-step-3));
  }

  .resize .textarea {
    resize: both;
  }

  .textarea:active, .textarea:focus {
    border: 1px solid hsl(var(--primary-base));
    outline: none;
    background: hsl(var(--background-step-2));
  }

  .req-star {
    color: hsl(var(--danger-base));
    font-weight: 700;
  }
</style>